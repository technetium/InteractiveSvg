
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
</head>
<body>

https://eloquentjavascript.net/15_event.html


export default class FormSubscriber extends EventSubscriber {
Bla bla


mousedown
enter

<script>
	console.log('script');
	
	//document.addEventListener("click", onClick);
	
	function onClick(e) {
		console.log('onClickMain');
		console.log(e);
	}
	function onButtonClick(e) {
		console.log('onButtonClick');
		console.log(e);
	}
	
	class TcSvgEdit {
		constructor() {
			console.log('construct');
			document.addEventListener("click", function(event){
				TcSvgEdit.onClick(event);
			});
		}
		
		static onClick(event) {
			console.log('TcSvgEdit.onClick');
			console.log(event);
			TcSvgEdit.svgOnClick(event);
		}
		

		static svgOnClick(event) {
			let svg = event.target.closest('svg.tc_edit');
			if (null === svg) { return; }
			console.log(svg);
			TcSvgEdit.svgAddNode(svg, event.clientX, event.clientY);
		}
		
		static svgAddNode(svg, x, y) {
			console.log('svgAddNode('+x+', '+y+')');
			//let c = document.createElement("circle");
			let c = document.createElementNS("http://www.w3.org/2000/svg", "circle");
			c.setAttribute('cx', x);
			c.setAttribute('cy', y);
			c.setAttribute('r', 40);
			c.setAttribute('stroke', 'black');
			c.setAttribute('fill', 'red');
			svg.append(c);
			console.log(c);
		}
		
		static utilGetAbsolutePosition(element) {
			let r = { x: element.offsetLeft, y: element.offsetTop };
			if (element.offsetParent) {
				let tmp = TcSvgEdit.utilGetAbsolutePosition(element.offsetParent);
				r.x += tmp.x;
				r.y += tmp.y;
			}
			return r;
		}

	}

	new TcSvgEdit();
</script>


addEventListener("click", function(){modifyText("four")}, false);

<button>Click me</button>
<button>Click me</button>
<p>No handler here.</p>
<script>
  let buttons = document.querySelectorAll("button");
	buttons.forEach(function(button) {
	///console.log(button);
	button.addEventListener("click", onButtonClick);
});
  
  </script>


<svg version="1.1"
     xmlns:svg="http://www.w3.org/2000/svg"
     xmlns="http://www.w3.org/2000/svg"
     width="500" height="240"
	class="tc_edit"
	id="svg1"
>    

    
</svg>


<svg version="1.1"
     xmlns:svg="http://www.w3.org/2000/svg"
     xmlns="http://www.w3.org/2000/svg"
     width="500" height="240"
	class="not_tc_edit"
	id="svg2"
>
   <g transform="translate(280,100)" >
        <circle class="control_point" cx="0" cy="0" r="10"  />
        <circle class="point4 invisible" cx="0" cy="0" r="3" />
    </g>
</svg>

<svg version="1.1"
     xmlns:svg="http://www.w3.org/2000/svg"
     xmlns="http://www.w3.org/2000/svg"
     width="500" height="240"
	class="tc_edit"
	id="svg3"
>
   <g transform="translate(280,100)" >
        <circle class="control_point" cx="0" cy="0" r="10" />
        <circle class="point4 invisible" cx="0" cy="0" r="3" />
    </g>
</svg>

  function getAbsolutePosition(element) {
    var r = { x: element.offsetLeft, y: element.offsetTop };
    if (element.offsetParent) {
      var tmp = getAbsolutePosition(element.offsetParent);
      r.x += tmp.x;
      r.y += tmp.y;
    }
    return r;
  };

</body>
</html>